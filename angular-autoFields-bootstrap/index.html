<!doctype html>
<html lang="en" ng-app="app" ng-controller="demoCtrl">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Angular AutoFields</title>
	<meta name="description" content="Avoid bloating your AngularJS templates with repetitive form html. Instead, just specify a schema for the form and the model you want to bind it to and you're done!">
	<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
	<!-- Rainbow JS for syntax highlighting -->
	<link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/themes/github.css">
	<style type="text/css">
		.bs-masthead,.bs-header {
			position: relative;
			padding: 30px 15px;
			color: #fff;
			text-align: center;
			text-shadow: 0 1px 0 rgba(0,0,0,.1);
			background-color: #45a0de;
			background-image: -webkit-linear-gradient(top,#2891d9 0,#45a0de 100%);
			background-image: linear-gradient(to bottom,#2891d9 0,#45a0de 100%);
			background-repeat: repeat-x;
			filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#2891d9', endColorstr='#45a0de', GradientType=0)
		}
		.bs-masthead .bs-booticon {
			margin: 0 auto 30px
		}

		.bs-masthead h1 {
			font-weight: 300;
			line-height: 1;
			color: #fff
		}

		.bs-masthead .lead {
			margin: 0 auto 30px;
			font-size: 20px;
			color: #fff
		}

		.bs-masthead .btn {
			width: 100%;
			padding: 15px 30px;
			font-size: 20px
		}

		@media (min-width:480px) {
			.bs-masthead .btn {
				width: auto
			}
		}

		@media (min-width:768px) {
			.bs-masthead {
				padding-top: 80px;
				padding-bottom: 80px;
				text-align: left;
			}

			.bs-masthead .lead{
				margin:0 0 30px;
			}

			.bs-masthead h1 {
				font-size: 60px
			}

			.bs-masthead .lead {
				font-size: 24px
			}
		}

		@media (min-width:992px) {
			.bs-masthead .lead {
				width: 80%;
				font-size: 30px
			}
		}

		.btn-outline-inverse {
			color: #fff;
			background-color: transparent;
			border-color: #fff
		}

		.btn-outline-inverse:hover,.btn-outline-inverse:focus,.btn-outline-inverse:active {
			color: #45a0de;
			text-shadow: none;
			background-color: #fff;
			border-color: #fff
		}

		.nav-tabs>li.active>a, .nav-tabs>li.active>a:hover, .nav-tabs>li.active>a:focus {
			background-color: #f8f8f8;
			border: 1px solid #ccc;
			border-bottom-color: transparent;
		}

		.tab-pane>pre{
			border-top: 0;
			border-radius:0 0 3px 3px;
		}

		.tag.close{
			float: none;
			font-size: 13px;
			font-weight: normal;
			color: navy;
			text-shadow: none;
			opacity: 1;
			cursor: text;
		}
		.bs-social-buttons li{
		}
	</style>
</head>
<body>
	<div class="bs-masthead" role="main">
		<div class="container">
			<h1>Angular AutoFields</h1>
			<p class="lead">Avoid bloating your templates with repetitive form html.<br/>Instead, just specify a schema for the form and the model you want to bind it to and you're done!</p>
			<p class="lead">
				<a href="https://github.com/JustMaier/angular-autofields-bootstrap" class="btn btn-outline-inverse btn-lg">Code on Github</a>
			</p>
			<ul class="bs-social-buttons list-inline">
				<li>
					<iframe src="http://ghbtns.com/github-btn.html?user=JustMaier&repo=angular-autofields-bootstrap&type=watch&count=true"
							allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
				</li>
				<li>
					<iframe src="http://ghbtns.com/github-btn.html?user=JustMaier&repo=angular-autofields-bootstrap&type=fork&count=true"
							allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
				</li>
				<li>
					<a href="https://twitter.com/share" class="twitter-share-button"
					   data-hashtags="angularjs">Tweet</a>
					<script>!function (d, s, id) {
						var js, fjs = d.getElementsByTagName(s)[0];
						if (!d.getElementById(id)) {
							js = d.createElement(s);
							js.id = id;
							js.src = "http://platform.twitter.com/widgets.js";
							fjs.parentNode.insertBefore(js, fjs);
						}
					}(document, "script", "twitter-wjs");</script>
				</li>
				<li>
					<!-- Place this tag where you want the +1 button to render. -->
					<div class="g-plusone" data-size="medium"></div>

					<!-- Place this tag after the last +1 button tag. -->
					<script type="text/javascript">
						(function () {
							var po = document.createElement('script');
							po.type = 'text/javascript';
							po.async = true;
							po.src = 'https://apis.google.com/js/plusone.js';
							var s = document.getElementsByTagName('script')[0];
							s.parentNode.insertBefore(po, s);
						})();
					</script>
				</li>
			</ul>
		</div>
	</div>
	<section id="body">
		<div class="container">
			<h2>NEW!</h2>
			<p class="lead">This project has just been completely revamped to be <a href="#extend">more modular</a>. You can now use AutoFields without bootstrap!</p>

			<section id="installation">
				<div class="page-header">
					<h1>Installation</h1>
				</div>
				<h3>Bower</h3>
				<pre>bower install angular-autoFields-bootstrap</pre>
				<h3>Nuget</h3>
				<pre>install-package AngularJs.AutoFields.Bootstrap</pre>
				<h3>Manually</h3>
				<pre>&lt;script type=&quot;text/javascript&quot; src=&quot;js/autofields.js&quot;&gt;&lt;/script&gt;
&lt;!-- With Bootstrap --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;js/autofields-bootstrap.js&quot;&gt;&lt;/script&gt;</pre>
			</section>
			<section id="usage">
				<div class="page-header">
					<h1>Usage</h1>
				</div>
				<ol>
					<li>If you're doing this manually, be sure to install Angular-UI Bootstrap for date popover support</li>
					<li>Include the <code>autofields.js</code> and <code>autofields-bootstrap.js</code> scripts provided by this component into your app</li>
					<li>Add <code>autofields</code> as a module dependency to your app</li>
				</ol>
			</section>

			<section id="demo">
				<div class="page-header">
					<h1>Demo</h1>
				</div>

				<div class="row" id="markup">
<div class="col-sm-6">
	<form name="joinForm" ng-submit="join()">
		<auto:fields fields="schema" data="user" options="options"></auto:fields>
		<button type="submit" class="btn btn-default btn-lg btn-block" ng-class="{'btn-primary':joinForm.$valid}" tabindex="100">Join</button>
	</form>
</div>
<div class="col-sm-6">
	<h4>Bound Data</h4>
	<pre ng-bind="user | json"></pre>
	<h4>Demo Functions</h4>
	<button class="btn btn-default" ng-click="addField()">Add Field</button>
	<button class="btn btn-default" ng-click="toggleValidation()">Toggle Validation</button>
	<button class="btn btn-default" ng-click="togglePopovers()">Toggle Popovers</button>
	<button class="btn btn-default" ng-click="toggleHorizontal()">Toggle Horizontal</button>
</div>
				</div>				

				<hr>

				<h3>Code</h3>

				<tabset>
					<tab heading="Markup">
						<pre>
							<code data-language="html" ng-bind="markup"></code>
						</pre>
					</tab>
					<tab heading="Javascript">
						<pre>
							<code data-language="javascript" ng-bind="code"></code>
						</pre>
					</tab>
				</tabset>
			</section>

			<section id="schema">
				<div class="page-header">
					<h1>Field Schema</h1>
				</div>
				<ul>
					<li><code>property</code> the data property to bind to</li>
					<li><code>type</code> the type of field. Options include: checkbox, date, select, textarea, any text variation (ie. password, text, email, number)</li>
					<li><code>label</code> the label for the field. If no label is provided it will convert the property name to title case. If you don't want a label, set it's value to ''</li>
					<li><code>placeholder</code> the placeholder for the field. If no placeholder is provided it will use the label. If you don't want a placeholder, set it's value to ''</li>
					<li><code>help</code> a block of help or description text to be displayed beneath the field</li>
					<li><code>attr</code> any additional attributes you would like to have on the object. Camelcase is converted to dash notation. Validation properties can go here.</li>
					<li><code>list</code> the string that goes into ng-options for select fields</li>
					<li><code>rows</code> number of textarea rows (default: 3)</li>
					<li><code>columns</code> number of sm columns a field should span if the type is multiple. If this is applied at the same level as the multiple type, it will apply it to all of it's fields.</li>
					<li><code>msgs</code> validation messages for corresponding validation properties on the field</li>
					<li><code>validate</code> enable/disable validation for the field (default: true)</li>
					<li>
						<code>addons</code> array of addon objects to be included with the input
						<ul>
							<li><code>button</code> is a button (default: false)</li>
							<li><code>icon</code> class string for an icon to include, empty or null implies no icon</li>
							<li><code>content</code> string to be placed in the addon</li>
							<li><code>before</code> prepend the addon (default: false)</li>
						</ul>
					</li>
				</ul>
			</section>

			<section id="options">
				<div class="page-header">
					<h1>Options</h1>
				</div>
				<h4>Standard</h4>
				<ul>
					<li><code>classes</code> object with an array of classes for each element of a field group: container, input, label</li>
					<li><code>attributes</code> object with default attribute-value pairs for each element of a field group: container, input, label</li>
					<li><code>displayAttributes</code> array of attributes that affect field display. <span class="text-muted">ng-if, ng-show, ng-hide</span></li>
					<li><code>container</code> the html for the div that will hold the fields</li>
					<li><code>textareaRows</code> the default amount of rows for a textarea (3)</li>
					<li><code>fixUrl</code> whether or not url type fields should have http:// auto added (true)</li>
				</ul>

				<h4>With Validation</h4>
				<ul>
					<li><code>validation</code> settings for validation
						<ul>
							<li><code>enabled</code> enabled/disable validation (enabled by default)</li>
							<li><code>showMessages</code> enabled/disable validation messages (enabled by default)</li>
							<li><code>defaultMsgs</code> default validation messages when none is specified in the field schema</li>
						</ul>
					</li>
				</ul>

				<h4>With Bootstrap</h4>
				<ul>
					<li><code>classes</code> adds 4 new element class arrays: row, col, colOffset, helpBlock</li>
					<li>
						<code>layout</code> layout options for the fields
						<ul>
							<li><code>type</code> form type: basic | horizontal</li>
							<li><code>labelSize</code> how many columns a label should span</li>
							<li><code>inputSize</code> how many columns an input should span</li>
						</ul>
					</li>
					<li><code>defaultOption</code> the text for the default select option (Select One)</li>
					<li><code>dateSettings</code> settings for the date fields (<a href="http://angular-ui.github.io/bootstrap/#/datepicker" target="_blank">see angular-ui-bootstrap's date picker</a>)</li>
				</ul>
			</section>

			<section id="extend">
				<div class="page-header">
					<h1>Extend</h1>
				</div>

				<p>AutoFields is now highly extensible allowing developer to easily add new field types and field properties.</p>

				<h3>Adding New Field Types</h3>
				<h4><code>$autofieldsProvider.registerHandler(types, handler)</code></h4>
				<ul>
					<li><code>types</code> a string or array of strings with field types that will be used to map to the handler</li>
					<li>
						<code>handler</code> a function that will be called by AutoFields to create the fields html. AutoFields will pass directive, field, and field index
						<ul>
							<li>
								<code>directive</code> directive properties, options, and elements:
								<ul>
									<li><code>container</code> the autofields container element</li>
									<li><code>options</code> the options for the directive</li>
								</ul>
							</li>
							<li><code>field</code> the field schema currently being processed</li>
							<li><code>index</code> the index of the field in the field schema array</li>
						</ul>
					</li>
				</ul>

				<h4>Example</h4>
				<pre>
<code data-language="javascript" class="ng-non-bindable">angular.module('autofields.checkbox', ['autofields.core'])
.config(['$autofieldsProvider', function($autofieldsProvider){
	// Checkbox Field Handler
	$autofieldsProvider.registerHandler('checkbox', function(directive, field, index){
		var fieldElements = $autofieldsProvider.field(directive, field, '&lt;input/&gt;');

		if(fieldElements.label) fieldElements.label.prepend(fieldElements.input);

		return fieldElements.fieldContainer;
	});
}]);</code></pre>

				<hr>

				<h3>Adding New Field Properties</h3>
				<h4><code>$autofieldsProvider.registerMutator(key, mutator, options)</code></h4>
				<ul>
					<li><code>key</code> something the mutator can be referenced by in require &amp; override requests</li>
					<li>
						<code>mutator</code> called by autofields after the creation of a field element
						<ul>
							<li>
								<code>directive</code> directive properties, options, and elements:
								<ul>
									<li><code>container</code> the autofields container element</li>
									<li><code>options</code> the options for the directive</li>
								</ul>
							</li>
							<li><code>field</code> the field schema currently being processed</li>
							<li>
								<code>fieldElements</code> an object containing:
								<ul>
									<li><code>fieldContainer</code> the container element for the field's label and input</li>
									<li><code>label</code> the label element</li>
									<li><code>input</code> the input element</li>
									<li><code>validation</code> whether or not to include validation <span class="text-muted">requires validation</span></li>
									<li><code>msgs</code> an array of possible error messages <span class="text-muted">requires validation</span></li>
									<li><code>validMsg</code> a field's valid message <span class="text-muted">requires validation</span></li>
								</ul>
							</li>
						</ul>
					</li>
				</ul>

				<h4>Example</h4>
				<pre>
<code data-language="javascript" class="ng-non-bindable">angular.module('autofields.helpblock', ['autofields.core'])
.config(['$autofieldsProvider', function($autofieldsProvider){
	// Help Block Propert Support
	$autofieldsProvider.registerMutator('helpBlock', function(directive, field, fieldElements){
		if(!field.help) return fieldElements;
		
		fieldElements.helpBlock = angular.element('&lt;p/&gt;');
		fieldElements.helpBlock.addClass(directive.options.classes.helpBlock.join(' '))
		fieldElements.helpBlock.html(field.help);
		fieldElements.fieldContainer.append(fieldElements.helpBlock);

		return fieldElements;
	});
}]);</code></pre>
			</section>

			<section id="notes">
				<div class="page-header">
					<h1>Notes</h1>
				</div>
				<ul>
					<li>It shares the scope of it's parent so that it can access the data on the scope</li>
				</ul>
			</section>
		</div>
	</section>

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.min.js"></script>
	<script type="text/javascript" src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
	<script type="text/javascript" src="autofields.js"></script>
	<script type="text/javascript" src="autofields-bootstrap.js"></script>
	<script type="text/javascript" id="example">
angular.module('app',['autofields'])
.controller('demoCtrl', ['$scope','$log', function ($scope, $log) {
	$scope.user = {
		username: '',
		email: 'test@test.com',
		gender: null,
		genderCheck: null,
		bio: '',
		website: '',
		number: 1,
		birthdate: new Date(),
		password: '',
		confirmPassword: '',
		rememberMe: false
	};

	$scope.schema = [
		{ property: 'username', type: 'text', attr: { ngMinlength: 4, required: true }, msgs: {minlength: 'Needs to have at least 4 characters'} },
		{ property: 'email', type: 'email', help: 'Don\'t worry we won\'t spam your inbox', attr: { required: true, ngMinlength: 4 }, msgs: {required: 'You need an email address', email:'Email address needs to be valid', valid: 'Nice email address!'} },
		{ property: 'website', type: 'url', msgs: {url: 'You need a valid url'} },
		{ property: 'number', label:'Number between 1-10', type: 'number', attr: {min:1, max: 10}, msgs: {min: 'You need a number no less than 1', max: 'You need a number no greater than 10'}, validate:false },
		{ property: 'birthdate', type: 'date', attr: { required: true } },
		{ property: 'gender', type: 'select', list: 'key as value for (key,value) in genders', attr: {required: true}},
		{ property: 'genderCheck', label:'Are you really?', type: 'select', list: 'key as value for (key,value) in genderCheck', attr: {required: true, ngShow:'$data.gender != null'}},
		{ property: 'bio', type: 'textarea', rows: 5, placeholder: 'A bit about yourself...', attr:{required:true}},
		{ type:'multiple', fields: [
			{ property: 'password', type: 'password', attr: { required: true, ngMinlength:6 } },
			{ property: 'confirmPassword', label: 'Confirm Password', type: 'password', attr: { confirmPassword: 'user.password', required: true, ngMinlength:6 }, msgs: {match: 'Your passwords need to match'} }
		], columns: 6},
		{ property: 'rememberMe', label: 'Stay signed in', type: 'checkbox' }
	];

	$scope.options = {
		validation: {
			enabled: true,
			showMessages: false
		},
		layout: {
			type: 'basic',
			labelSize: 3,
			inputSize: 9
		}
	};

	$scope.genders = {
		0: 'Male',
		1: 'Female'
	};

	$scope.genderCheck = {
		0: 'No',
		1: 'Yes'
	};

	$scope.toggleValidation = function(){
		$scope.options.validation.enabled = !$scope.options.validation.enabled;
	};

	$scope.togglePopovers = function(){
		$scope.options.validation.showMessages = !$scope.options.validation.showMessages;
	};

	$scope.toggleHorizontal = function(){
		$scope.options.layout.type = $scope.options.layout.type == 'horizontal'? 'basic' : 'horizontal';
	}

	$scope.addField = function(){
		$scope.schema.push({property: 'new'+(new Date().getTime()), label: 'New Field'});
	};

	$scope.join = function(){
		if(!$scope.joinForm.$valid) return;
		//join stuff....
		$log.info($scope.user);
		alert('You\'ve joined!\n\nSee console for additional info.');
	}
}])
.directive('confirmPassword', [function () {
	return {
		restrict: 'A',
		require: 'ngModel',
		link: function (scope, element, attrs, ngModel) {
			var validate = function (viewValue) {
				var password = scope.$eval(attrs.confirmPassword);
				ngModel.$setValidity('match', ngModel.$isEmpty(viewValue) || viewValue == password);
				return viewValue;
			}
			ngModel.$parsers.push(validate);
			scope.$watch(attrs.confirmPassword, function(value){
				validate(ngModel.$viewValue);
			})
		}
	}
}]);
	</script>
	<script type="text/javascript">
		angular.module('app')
		.run(['$rootScope', function($rootScope){
			$rootScope.markup = document.getElementById('markup').innerHTML;
			$rootScope.code = document.getElementById('example').innerHTML;
		}]);
	</script
	<!-- Rainbow JS for syntax highlighting -->
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/rainbow.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/generic.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/html.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/javascript.js"></script>
</body>
</html>